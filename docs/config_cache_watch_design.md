# 設定ファイル読み込み・キャッシュ・ウォッチ設計

## 設定ファイル（.kotemari.yml）読み込み
- プロジェクトルートに .kotemari.yml が存在する場合は、優先的に読み込む
- YAMLパーサ（例: `yaml` npmパッケージ）を利用し、TypeScriptオブジェクトに変換
- 設定内容例:
  - 除外パス（exclude）
  - 解析対象拡張子
  - キャッシュ有効/無効
- 設定ファイルが無い場合はデフォルト設定で動作

## キャッシュ設計
- 依存関係解析結果やファイルリストをキャッシュとして保持
- キャッシュはメモリ上（プロセス内）に基本保持。大規模プロジェクトや再起動を考慮し、ファイルキャッシュ（例: .kotemari.cache.json）にも対応予定
- 設定やプロジェクトファイルが変更された場合はキャッシュを自動クリア
- `clearCache()` メソッドで明示的にキャッシュ削除可能

## ウォッチ（監視）設計
- Node.jsの `fs.watch` または `chokidar` パッケージを利用し、プロジェクト内のファイル変更を監視
- 監視対象は .gitignore や .kotemari.yml のexclude設定を考慮
- 変更・追加・削除イベントを検知したら、依存関係解析やキャッシュを自動的に再実行
- `startWatching()` で監視開始、`stopWatching()` で監視停止
- バックグラウンドでの安定動作を重視し、エラー時のリカバリ設計も考慮

---
今後はこの設計に基づき、各機能のテスト駆動実装を進めます。
